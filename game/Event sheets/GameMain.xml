<?xml version="1.0" encoding="utf-8" ?>
<c2eventsheet>
    <!--All the 'name' attributes are ignored by Construct 2 - they are there for readability only.-->
    <name>GameMain</name>
    <events>
        <include>Enemies</include>
        <comment>Game Data</comment>
        <variable comment="Player Score." constant="0" name="Score" sid="7486391333038373" static="0" type="number">0</variable>
        <variable comment="Highest score the player ever had." constant="0" name="HighScore" sid="3298193103443636" static="0" type="number">0</variable>
        <comment>Parameters</comment>
        <variable comment="Delay between machinegun shots (seconds)" constant="0" name="MachinegunDelay" sid="5245227575535393" static="0" type="number">0.1</variable>
        <variable comment="Delay between shotgun shots (seconds)" constant="0" name="ShotgunDelay" sid="9847780261608531" static="0" type="number">2</variable>
        <variable comment="Delay between shotgun shots (seconds)" constant="0" name="GranadeDelay" sid="9702254264243088" static="0" type="number">3</variable>
        <variable comment="Shoot angle max randomness." constant="0" name="ShotAngle" sid="4154039900926838" static="0" type="number">2</variable>
        <variable comment="Shoot angle max randomness." constant="0" name="CartidgeAngle" sid="4389483266959345" static="0" type="number">5</variable>
        <variable comment="Shot random Y position max value." constant="0" name="ShotPosition" sid="1149761586430817" static="0" type="number">5</variable>
        <variable comment="Camera (and character following it) speed." constant="0" name="CameraSpeed" sid="3644210586740942" static="0" type="number">50</variable>
        <variable comment="Dramatic pause time (pauses the game when enemy dies)" constant="0" name="DramaticPauseTime" sid="8911201919267045" static="0" type="number">0.1</variable>
        <comment>Flags</comment>
        <variable comment="Show Debug Layer?" constant="0" name="ShowDebug" sid="4447915718697695" static="0" type="number">0</variable>
        <variable comment="Is the player invincible?" constant="0" name="PlayerInvincible" sid="6336900665704623" static="0" type="number">1</variable>
        <event-group collapsed="1" description="Player controller events." sid="7495863798319145" title="Controller">
            <sub-events>
                <comment>Shots when the shot key is pressed (considering the delay)</comment>
                <event-block any="1" sid="5839817289045311">
                    <conditions>
                        <condition id="3" name="Is button down" sid="8732721542079807" type="Gamepad">
                            <param id="0" name="Gamepad">0</param>
                            <param id="1" name="Button">0</param>
                        </condition>
                        <condition id="2" name="Key is down" sid="1063890649566922" type="Keyboard">
                            <param id="0" name="Key">32 (Space)</param>
                        </condition>
                        <condition id="2" name="Mouse button is down" sid="1913539226346655" type="Mouse">
                            <param id="0" name="Mouse button">0</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="0" name="Call function" sid="2638553854604385" type="Function">
                            <param id="0" name="Name">&quot;Shoot&quot;</param>
                            <param id="1" name="Parameter {n}"></param>
                        </action>
                    </actions>
                </event-block>
                <comment>Remaps controller ( W to Up)</comment>
                <event-block any="1" sid="7010657242711293">
                    <conditions>
                        <condition id="2" name="Key is down" sid="8260060870164343" type="Keyboard">
                            <param id="0" name="Key">87 (W)</param>
                        </condition>
                        <condition id="3" name="Is button down" sid="4359573892309851" type="Gamepad">
                            <param id="0" name="Gamepad">0</param>
                            <param id="1" name="Button">12</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action behavior="8Direction" id="7" name="Simulate control" sid="535255313765059" type="Player">
                            <param id="0" name="Control">2</param>
                        </action>
                    </actions>
                </event-block>
                <comment>Remaps controller (A to Left)</comment>
                <event-block any="1" sid="2372877592491562">
                    <conditions>
                        <condition id="2" name="Key is down" sid="1756855415641945" type="Keyboard">
                            <param id="0" name="Key">65 (A)</param>
                        </condition>
                        <condition id="3" name="Is button down" sid="6648400513725437" type="Gamepad">
                            <param id="0" name="Gamepad">0</param>
                            <param id="1" name="Button">14</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action behavior="8Direction" id="7" name="Simulate control" sid="2817496913014898" type="Player">
                            <param id="0" name="Control">0</param>
                        </action>
                    </actions>
                </event-block>
                <comment>Remaps controller ( S to Down)</comment>
                <event-block any="1" sid="9694203435112949">
                    <conditions>
                        <condition id="2" name="Key is down" sid="5222997502542291" type="Keyboard">
                            <param id="0" name="Key">83 (S)</param>
                        </condition>
                        <condition id="3" name="Is button down" sid="5257553057283662" type="Gamepad">
                            <param id="0" name="Gamepad">0</param>
                            <param id="1" name="Button">13</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action behavior="8Direction" id="7" name="Simulate control" sid="2016963088716626" type="Player">
                            <param id="0" name="Control">3</param>
                        </action>
                    </actions>
                </event-block>
                <comment>Remaps controller ( D to Right)</comment>
                <event-block any="1" sid="1583024347804906">
                    <conditions>
                        <condition id="2" name="Key is down" sid="1812643188587365" type="Keyboard">
                            <param id="0" name="Key">68 (D)</param>
                        </condition>
                        <condition id="3" name="Is button down" sid="1721782973921984" type="Gamepad">
                            <param id="0" name="Gamepad">0</param>
                            <param id="1" name="Button">15</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action behavior="8Direction" id="7" name="Simulate control" sid="9434222737208028" type="Player">
                            <param id="0" name="Control">1</param>
                        </action>
                    </actions>
                </event-block>
                <comment>Sets controller X and Y axis (Left Stick) to the character movement.</comment>
                <event-block any="1" sid="4315114299590872">
                    <conditions>
                        <condition id="5" name="Compare axis" sid="7068125874078239" type="Gamepad">
                            <param id="0" name="Gamepad">0</param>
                            <param id="1" name="Axis">0</param>
                            <param id="2" name="Comparison">1</param>
                            <param id="3" name="Value">0</param>
                        </condition>
                        <condition id="5" name="Compare axis" sid="2344075331327112" type="Gamepad">
                            <param id="0" name="Gamepad">0</param>
                            <param id="1" name="Axis">1</param>
                            <param id="2" name="Comparison">1</param>
                            <param id="3" name="Value">0</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action behavior="8Direction" id="3" name="Set speed" sid="3584233665448162" type="Player">
                            <param id="0" name="Speed">min( Player.8Direction.Speed + (Player.8Direction.Acceleration * dt), Player.8Direction.MaxSpeed)</param>
                        </action>
                        <action behavior="8Direction" id="9" name="Set vector X" sid="1658473807747688" type="Player">
                            <param id="0" name="Vector X">Gamepad.Axis(0,0) * Player.8Direction.Speed * dt</param>
                        </action>
                        <action behavior="8Direction" id="10" name="Set vector Y" sid="7498969741732546" type="Player">
                            <param id="0" name="Vector Y">Gamepad.Axis(0,1) * Player.8Direction.Speed * dt</param>
                        </action>
                    </actions>
                </event-block>
                <event-group collapsed="1" description="Turret position shift events." sid="8827348926521787" title="Turret Shift">
                    <sub-events>
                        <variable comment="Has the player shifted the turret recently?" constant="0" name="HasShifted" sid="3785510696946602" static="1" type="number">0</variable>
                        <comment>Shifts turret position</comment>
                        <event-block any="1" sid="2031174586197691">
                            <conditions>
                                <condition id="3" name="Is button down" sid="8737562344074987" type="Gamepad">
                                    <param id="0" name="Gamepad">0</param>
                                    <param id="1" name="Button">2</param>
                                </condition>
                                <condition id="2" name="Mouse button is down" sid="250832304053303" type="Mouse">
                                    <param id="0" name="Mouse button">2</param>
                                </condition>
                                <condition id="2" name="Key is down" sid="9779116376614" type="Keyboard">
                                    <param id="0" name="Key">16 (Shift)</param>
                                </condition>
                            </conditions>
                            <actions />
                            <sub-events>
                                <event-block sid="2292425485025299">
                                    <conditions>
                                        <condition id="-14" name="Compare variable" sid="9960329043995696" type="System">
                                            <param id="0" name="Variable">HasShifted</param>
                                            <param id="1" name="Comparison">0</param>
                                            <param id="2" name="Value">0</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-14" name="Toggle boolean" sid="5892429885628867" type="Player">
                                            <param id="0" name="Instance variable">TurretInverted</param>
                                        </action>
                                        <action id="-9" name="Set value" sid="3787486098013682" type="System">
                                            <param id="0" name="Variable">HasShifted</param>
                                            <param id="1" name="Value">1</param>
                                        </action>
                                    </actions>
                                </event-block>
                            </sub-events>
                        </event-block>
                        <comment>Lets the player shift turret position again, if the player released the shift turret button.</comment>
                        <event-block sid="3903545533385366">
                            <conditions>
                                <condition id="3" inverted="1" name="Is button down" sid="1251831008782075" type="Gamepad">
                                    <param id="0" name="Gamepad">0</param>
                                    <param id="1" name="Button">2</param>
                                </condition>
                                <condition id="2" inverted="1" name="Mouse button is down" sid="4764836149695574" type="Mouse">
                                    <param id="0" name="Mouse button">2</param>
                                </condition>
                                <condition id="2" inverted="1" name="Key is down" sid="8570841017901958" type="Keyboard">
                                    <param id="0" name="Key">16 (Shift)</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-9" name="Set value" sid="746793105817974" type="System">
                                    <param id="0" name="Variable">HasShifted</param>
                                    <param id="1" name="Value">0</param>
                                </action>
                            </actions>
                        </event-block>
                        <comment>Mirrors the turret, if the turret is inverted.</comment>
                        <event-block sid="9615974238463531">
                            <conditions>
                                <condition id="-8" name="Is boolean instance variable set" sid="8872636366313338" type="Player">
                                    <param id="0" name="Instance variable">TurretInverted</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="7" name="Set mirrored" sid="6498631559777619" type="Turret">
                                    <param id="0" name="State">0</param>
                                </action>
                            </actions>
                        </event-block>
                        <comment>Unmirrors the turret, if the turret is not inverted.</comment>
                        <event-block sid="6351894695059508">
                            <conditions>
                                <condition id="-8" inverted="1" name="Is boolean instance variable set" sid="2733719950126874" type="Player">
                                    <param id="0" name="Instance variable">TurretInverted</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="7" name="Set mirrored" sid="3285280357650137" type="Turret">
                                    <param id="0" name="State">1</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-group>
            </sub-events>
        </event-group>
        <event-group description="Normal and special shot events, and extra shooting events, like cartidges." sid="2480136762700605" title="Shot events">
            <sub-events>
                <comment>Destroys shot outside of screen.</comment>
                <event-block sid="5269143083626051">
                    <conditions>
                        <condition id="-3" inverted="1" name="Is on-screen" sid="3701865153547944" type="PlayerProjectile" />
                    </conditions>
                    <actions>
                        <action id="-9" name="Destroy" sid="6283014424403295" type="PlayerProjectile" />
                    </actions>
                </event-block>
                <comment>Creates cartidge and play sound when shot is spawned.</comment>
                <event-block sid="6955227496566467">
                    <conditions>
                        <condition id="-18" name="On created" sid="9058608935500594" type="PlayerProjectile" />
                        <condition id="-3" name="Is on-screen" sid="2347355524230811" type="PlayerProjectile" />
                    </conditions>
                    <actions>
                        <action id="0" name="Spawn another object" sid="4140254176253545" type="PlayerProjectile">
                            <param id="0" name="Object">Cartidge</param>
                            <param id="1" name="Layer">&quot;Game&quot;</param>
                            <param id="2" name="Image point">0</param>
                        </action>
                        <action id="7" name="Play (by name)" sid="7648320999102931" type="Audio">
                            <param id="0" name="Folder">0</param>
                            <param id="1" name="Audio file name">PlayerProjectile.SoundFile</param>
                            <param id="3" name="Loop">0</param>
                            <param id="4" name="Volume">0</param>
                            <param id="2" name="Tag (optional)">&quot;&quot;</param>
                        </action>
                    </actions>
                </event-block>
                <comment>Initializes cartidge effect.</comment>
                <event-block sid="5678837897234217">
                    <conditions>
                        <condition id="-18" name="On created" sid="7874728864907411" type="Cartidge" />
                    </conditions>
                    <actions>
                        <action behavior="Bullet" id="3" name="Set angle of motion" sid="6990774833128229" type="Cartidge">
                            <param id="0" name="Angle">Cartidge.Angle + 250 + random(-CartidgeAngle, CartidgeAngle + 1)</param>
                        </action>
                        <action id="-10" name="Set value" sid="3040574075836724" type="Cartidge">
                            <param id="0" name="Instance variable">MinY</param>
                            <param id="1" name="Value">Cartidge.Y + 10</param>
                        </action>
                    </actions>
                </event-block>
                <comment>Stops Cartidge if it &quot;hits the ground&quot;.</comment>
                <event-block sid="5298757296988459">
                    <conditions>
                        <condition id="-2" name="Compare Y" sid="6736453651273338" type="Cartidge">
                            <param id="0" name="Comparison">5</param>
                            <param id="1" name="Y co-ordinate">Cartidge.MinY</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action behavior="Bullet" id="5" name="Set enabled" sid="5426933233049227" type="Cartidge">
                            <param id="0" name="State">0</param>
                        </action>
                    </actions>
                </event-block>
                <comment>The granade generates an explosion when destroyed.</comment>
                <event-block sid="166045540509201">
                    <conditions>
                        <condition id="-19" name="On destroyed" sid="3744036748351515" type="Granade" />
                    </conditions>
                    <actions>
                        <action id="0" name="Spawn another object" sid="1076503946203735" type="Granade">
                            <param id="0" name="Object">Explosion</param>
                            <param id="1" name="Layer">&quot;Game&quot;</param>
                            <param id="2" name="Image point">0</param>
                        </action>
                    </actions>
                </event-block>
            </sub-events>
        </event-group>
        <event-group collapsed="1" description="Camera control, player placement on screen and and other rendering (layers, effects) events." sid="8555777568681449" title="Camera, Positioning and Rendering Events">
            <sub-events>
                <comment>Hides debug layer if flag is set to 0.</comment>
                <event-block sid="2117358144359866">
                    <conditions>
                        <condition id="-14" name="Compare variable" sid="9291172673316673" type="System">
                            <param id="0" name="Variable">ShowDebug</param>
                            <param id="1" name="Comparison">0</param>
                            <param id="2" name="Value">0</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-4" name="Set layer visible" sid="413623465911216" type="System">
                            <param id="0" name="Layer">&quot;Game - Debug&quot;</param>
                            <param id="1" name="Visibility">0</param>
                        </action>
                    </actions>
                </event-block>
                <comment>Shows debug layer if flag is not 0.</comment>
                <event-block sid="7399432453843184">
                    <conditions>
                        <condition id="-14" name="Compare variable" sid="4746845298660549" type="System">
                            <param id="0" name="Variable">ShowDebug</param>
                            <param id="1" name="Comparison">1</param>
                            <param id="2" name="Value">0</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-4" name="Set layer visible" sid="7552653586572749" type="System">
                            <param id="0" name="Layer">&quot;Game - Debug&quot;</param>
                            <param id="1" name="Visibility">1</param>
                        </action>
                    </actions>
                </event-block>
                <comment>Sets camera limit X.</comment>
                <event-block sid="8000594175719732">
                    <conditions>
                        <condition id="-18" name="On created" sid="5439655182113892" type="Camera" />
                    </conditions>
                    <actions>
                        <action id="-10" name="Set value" sid="547220834498555" type="Camera">
                            <param id="0" name="Instance variable">LimitX</param>
                            <param id="1" name="Value">LayoutWidth</param>
                        </action>
                        <action behavior="Bullet" id="0" name="Set speed" sid="5700581804717249" type="Camera">
                            <param id="0" name="Speed">CameraSpeed</param>
                        </action>
                        <action behavior="Bullet" id="0" name="Set speed" sid="9271923156136602" type="Player">
                            <param id="0" name="Speed">CameraSpeed</param>
                        </action>
                    </actions>
                </event-block>
                <comment>Stops camera at the limit.</comment>
                <event-block sid="3373660663949809">
                    <conditions>
                        <condition id="-1" name="Compare X" sid="4167246824406811" type="Camera">
                            <param id="0" name="Comparison">5</param>
                            <param id="1" name="X co-ordinate">Camera.LimitX</param>
                        </condition>
                        <condition behavior="Bullet" id="0" name="Compare speed" sid="890326594883279" type="Camera">
                            <param id="0" name="Comparison">4</param>
                            <param id="1" name="Speed">0</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action behavior="Bullet" id="0" name="Set speed" sid="8374477084976694" type="Player">
                            <param id="0" name="Speed">0</param>
                        </action>
                        <action behavior="Bullet" id="0" name="Set speed" sid="8404567247535911" type="Boss">
                            <param id="0" name="Speed">0</param>
                        </action>
                        <action behavior="Bullet" id="0" name="Set speed" sid="8890725826516254" type="Camera">
                            <param id="0" name="Speed">-CameraSpeed</param>
                        </action>
                        <action id="-16" name="Wait" sid="6479478115648254" type="System">
                            <param id="0" name="Seconds">8.5</param>
                        </action>
                        <action behavior="Bullet" id="0" name="Set speed" sid="858427136910586" type="Player">
                            <param id="0" name="Speed">-CameraSpeed</param>
                        </action>
                        <action behavior="Bullet" id="0" name="Set speed" sid="3601060799785007" type="Boss">
                            <param id="0" name="Speed">-CameraSpeed</param>
                        </action>
                    </actions>
                </event-block>
                <event-group collapsed="1" description="Player positioning events." sid="31258596315872" title="Player Positioning">
                    <sub-events>
                        <comment>Limits player X position to the minimum screen X position.</comment>
                        <event-block sid="4919757083946753">
                            <conditions>
                                <condition id="-1" name="Compare X" sid="8374351068520703" type="Player">
                                    <param id="0" name="Comparison">3</param>
                                    <param id="1" name="X co-ordinate">ViewportLeft(&quot;Game&quot;) + Player.Width</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-1" name="Set X" sid="8407080807855817" type="Player">
                                    <param id="0" name="X">ViewportLeft(&quot;Game&quot;) + Player.Width</param>
                                </action>
                            </actions>
                        </event-block>
                        <comment>Limits player X position to the maximum screen X position.</comment>
                        <event-block sid="6538463063075924">
                            <conditions>
                                <condition id="-1" name="Compare X" sid="93315604865813" type="Player">
                                    <param id="0" name="Comparison">5</param>
                                    <param id="1" name="X co-ordinate">ViewportRight(&quot;Game&quot;) - Player.Width</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-1" name="Set X" sid="5911146327369124" type="Player">
                                    <param id="0" name="X">ViewportRight(&quot;Game&quot;) - Player.Width</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-group>
            </sub-events>
        </event-group>
        <event-group collapsed="1" description="Score, lives, survivors, high score..." sid="7790449752168308" title="Game Data">
            <sub-events>
                <comment>Creates High Score, if it doesn&apos;t exist.</comment>
                <event-block sid="8139995756458101">
                    <conditions>
                        <condition id="-2" name="On start of layout" sid="9624404690909285" type="System" />
                        <condition id="3" inverted="1" name="Local key exists" sid="4151058604950191" type="Storage">
                            <param id="0" name="Key">&quot;Highscore&quot;</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="0" name="Set local value" sid="5981591420468967" type="Storage">
                            <param id="0" name="Key">&quot;Highscore&quot;</param>
                            <param id="1" name="Value">0</param>
                        </action>
                        <action id="-9" name="Set value" sid="4233977099093916" type="System">
                            <param id="0" name="Variable">HighScore</param>
                            <param id="1" name="Value">0</param>
                        </action>
                    </actions>
                </event-block>
                <comment>Loads High Score, if it exists.</comment>
                <event-block sid="4967726006181347">
                    <conditions>
                        <condition id="-2" name="On start of layout" sid="13021994163587" type="System" />
                        <condition id="3" name="Local key exists" sid="5245625152880898" type="Storage">
                            <param id="0" name="Key">&quot;Highscore&quot;</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-9" name="Set value" sid="8308144397575202" type="System">
                            <param id="0" name="Variable">HighScore</param>
                            <param id="1" name="Value">Storage.LocalValue(&quot;Highscore&quot;)</param>
                        </action>
                    </actions>
                </event-block>
                <comment>Updates High Score if the score is higher.</comment>
                <event-block sid="4739294620937505">
                    <conditions>
                        <condition id="-14" name="Compare variable" sid="7170720961527875" type="System">
                            <param id="0" name="Variable">Score</param>
                            <param id="1" name="Comparison">4</param>
                            <param id="2" name="Value">HighScore</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-9" name="Set value" sid="9208402880650869" type="System">
                            <param id="0" name="Variable">HighScore</param>
                            <param id="1" name="Value">Score</param>
                        </action>
                        <action id="0" name="Set local value" sid="8124209730485911" type="Storage">
                            <param id="0" name="Key">&quot;Highscore&quot;</param>
                            <param id="1" name="Value">HighScore</param>
                        </action>
                    </actions>
                </event-block>
            </sub-events>
        </event-group>
        <event-group collapsed="1" description="HUD events and updates." sid="7836260230105831" title="HUD">
            <sub-events>
                <comment>Updates score and high score on HUD.</comment>
                <event-block sid="8430060814907466">
                    <conditions>
                        <condition id="-1" name="Every tick" sid="9172965612731808" type="System" />
                    </conditions>
                    <actions>
                        <action id="0" name="Set text" sid="470229447322066" type="HUDScores">
                            <param id="0" name="Text">&quot;Survivors:&quot; &amp; Player.Survivors &amp; &quot;  Score: &quot; &amp; Score &amp; &quot;  Hi-Score: &quot; &amp; HighScore</param>
                        </action>
                    </actions>
                </event-block>
            </sub-events>
        </event-group>
        <event-group collapsed="1" description="Survivor pickup events." sid="3814513092485815" title="Survivor">
            <sub-events>
                <comment>Survivor pickup.</comment>
                <event-block sid="7520839760438962">
                    <conditions>
                        <condition id="0" name="On collision with another object" sid="7509513715816406" type="Survivor">
                            <param id="0" name="Object">Player</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-9" name="Destroy" sid="9126653180978348" type="Survivor" />
                        <action id="-11" name="Add to" sid="1999314990661007" type="Player">
                            <param id="0" name="Instance variable">Survivors</param>
                            <param id="1" name="Value">1</param>
                        </action>
                        <action id="0" name="Play" sid="5295743108729386" type="Audio">
                            <param id="0" name="Audio file">Survivor_Pickup</param>
                            <param id="2" name="Loop">0</param>
                            <param id="3" name="Volume">0</param>
                            <param id="1" name="Tag (optional)">&quot;&quot;</param>
                        </action>
                    </actions>
                </event-block>
                <comment>If you hit a survivor, it is hurt.</comment>
                <event-block sid="9780605234240704">
                    <conditions>
                        <condition id="0" name="On collision with another object" sid="6315859163289056" type="Survivor">
                            <param id="0" name="Object">PlayerProjectile</param>
                        </condition>
                        <condition behavior="Flash" id="0" inverted="1" name="Is flashing" sid="5343882460438325" type="Survivor" />
                    </conditions>
                    <actions>
                        <action id="0" name="Play" sid="6013478412062169" type="Audio">
                            <param id="0" name="Audio file">Survivor_Dead</param>
                            <param id="2" name="Loop">0</param>
                            <param id="3" name="Volume">0</param>
                            <param id="1" name="Tag (optional)">&quot;&quot;</param>
                        </action>
                        <action id="-12" name="Subtract from" sid="1760875383815696" type="Survivor">
                            <param id="0" name="Instance variable">HP</param>
                            <param id="1" name="Value">1</param>
                        </action>
                        <action behavior="Flash" id="0" name="Flash" sid="9226487694385725" type="Survivor">
                            <param id="0" name="&apos;On&apos; time">0.1</param>
                            <param id="1" name="&apos;Off&apos; time">0.1</param>
                            <param id="2" name="Duration">1.0</param>
                        </action>
                    </actions>
                </event-block>
                <comment>If the survivor has no health remaining, it turns into a zombie.</comment>
                <event-block sid="6717507944329868">
                    <conditions>
                        <condition id="-7" name="Compare instance variable" sid="8004552131775381" type="Survivor">
                            <param id="0" name="Instance variable">HP</param>
                            <param id="1" name="Comparison">3</param>
                            <param id="2" name="Value">0</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="0" name="Spawn another object" sid="4347855667763402" type="Survivor">
                            <param id="0" name="Object">Zombie</param>
                            <param id="1" name="Layer">&quot;Game&quot;</param>
                            <param id="2" name="Image point">0</param>
                        </action>
                        <action id="-9" name="Destroy" sid="4233178702260169" type="Survivor" />
                    </actions>
                </event-block>
            </sub-events>
        </event-group>
        <event-group collapsed="1" description="Player events." sid="1027178941590517" title="Player">
            <sub-events>
                <comment>If the player has no survivors left, restart the game.</comment>
                <event-block sid="8955538910618842">
                    <conditions>
                        <condition id="-7" name="Compare instance variable" sid="3704301008060957" type="Player">
                            <param id="0" name="Instance variable">Survivors</param>
                            <param id="1" name="Comparison">3</param>
                            <param id="2" name="Value">0</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-21" name="Reset global variables" sid="4439566014908862" type="System" />
                        <action id="-26" name="Restart layout" sid="749214528516938" type="System" />
                    </actions>
                </event-block>
                <comment>Update PlayerParts.</comment>
                <event-block sid="779260838852693">
                    <conditions>
                        <condition id="-1" name="Every tick" sid="2725214486993686" type="System" />
                    </conditions>
                    <actions>
                        <action id="-4" name="Set position to another object" sid="452218990661751" type="PlayerPart">
                            <param id="0" name="Object">Player</param>
                            <param id="1" name="Image point (optional)">0</param>
                        </action>
                        <action id="-4" name="Set position to another object" sid="3531268382753146" type="Turret">
                            <param id="0" name="Object">Player</param>
                            <param id="1" name="Image point (optional)">&quot;TurretOrigin&quot;</param>
                        </action>
                    </actions>
                </event-block>
                <event-group collapsed="1" description="Survivor Visibility events." sid="9882614110388473" title="Survivor Visibility">
                    <sub-events>
                        <comment>If there is at least one survivor, show the driver.</comment>
                        <event-block sid="2964161055486045">
                            <conditions>
                                <condition id="-7" name="Compare instance variable" sid="3694261441169888" type="Player">
                                    <param id="0" name="Instance variable">Survivors</param>
                                    <param id="1" name="Comparison">5</param>
                                    <param id="2" name="Value">1</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-15" name="Set visible" sid="4716046628482285" type="Driver">
                                    <param id="0" name="Visibility">1</param>
                                </action>
                            </actions>
                        </event-block>
                        <comment>If there is not at least one survivor, hide the driver.</comment>
                        <event-block sid="9293445393435874">
                            <conditions>
                                <condition id="-7" inverted="1" name="Compare instance variable" sid="6844126469407044" type="Player">
                                    <param id="0" name="Instance variable">Survivors</param>
                                    <param id="1" name="Comparison">5</param>
                                    <param id="2" name="Value">1</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-15" name="Set visible" sid="3253978551100158" type="Driver">
                                    <param id="0" name="Visibility">0</param>
                                </action>
                            </actions>
                        </event-block>
                        <comment>If there is at least two survivors, show the turret shooter.</comment>
                        <event-block sid="5409316078801071">
                            <conditions>
                                <condition id="-7" name="Compare instance variable" sid="3654543196144153" type="Player">
                                    <param id="0" name="Instance variable">Survivors</param>
                                    <param id="1" name="Comparison">5</param>
                                    <param id="2" name="Value">2</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-15" name="Set visible" sid="8058385087730136" type="TurretShooter">
                                    <param id="0" name="Visibility">1</param>
                                </action>
                            </actions>
                        </event-block>
                        <comment>If there is not at least two survivors, hide the turret shooter.</comment>
                        <event-block sid="7219282659406816">
                            <conditions>
                                <condition id="-7" inverted="1" name="Compare instance variable" sid="2742572485034575" type="Player">
                                    <param id="0" name="Instance variable">Survivors</param>
                                    <param id="1" name="Comparison">5</param>
                                    <param id="2" name="Value">2</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-15" name="Set visible" sid="9493823120255784" type="TurretShooter">
                                    <param id="0" name="Visibility">0</param>
                                </action>
                            </actions>
                        </event-block>
                        <comment>If there is at least three survivors, show the shotgunner.</comment>
                        <event-block sid="3384596516607763">
                            <conditions>
                                <condition id="-7" name="Compare instance variable" sid="6185121492805488" type="Player">
                                    <param id="0" name="Instance variable">Survivors</param>
                                    <param id="1" name="Comparison">5</param>
                                    <param id="2" name="Value">3</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-15" name="Set visible" sid="4407788172119352" type="Shotguner">
                                    <param id="0" name="Visibility">1</param>
                                </action>
                            </actions>
                        </event-block>
                        <comment>If there is not at least three survivors, hide the shotgunner.</comment>
                        <event-block sid="2908739416151731">
                            <conditions>
                                <condition id="-7" inverted="1" name="Compare instance variable" sid="8644661875396867" type="Player">
                                    <param id="0" name="Instance variable">Survivors</param>
                                    <param id="1" name="Comparison">5</param>
                                    <param id="2" name="Value">3</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-15" name="Set visible" sid="2713158077377827" type="Shotguner">
                                    <param id="0" name="Visibility">0</param>
                                </action>
                            </actions>
                        </event-block>
                        <comment>If there is at least four survivors, show the granadier.</comment>
                        <event-block sid="3396442104390124">
                            <conditions>
                                <condition id="-7" name="Compare instance variable" sid="7995664440389098" type="Player">
                                    <param id="0" name="Instance variable">Survivors</param>
                                    <param id="1" name="Comparison">5</param>
                                    <param id="2" name="Value">4</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-15" name="Set visible" sid="7390313955054442" type="Granedier">
                                    <param id="0" name="Visibility">1</param>
                                </action>
                            </actions>
                        </event-block>
                        <comment>If there is not at least four survivors, hide the granadier.</comment>
                        <event-block sid="4163630986401375">
                            <conditions>
                                <condition id="-7" inverted="1" name="Compare instance variable" sid="4596172367871845" type="Player">
                                    <param id="0" name="Instance variable">Survivors</param>
                                    <param id="1" name="Comparison">5</param>
                                    <param id="2" name="Value">4</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-15" name="Set visible" sid="5432899532405478" type="Granedier">
                                    <param id="0" name="Visibility">0</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-group>
            </sub-events>
        </event-group>
        <event-group collapsed="1" description="Helper functions." sid="993762252301922" title="Functions">
            <sub-events>
                <comment>Function called when the player is hit.</comment>
                <event-block sid="1701861504165762">
                    <conditions>
                        <condition id="0" name="On function" sid="3667652965092752" type="Function">
                            <param id="0" name="Name">&quot;HitPlayer&quot;</param>
                        </condition>
                        <condition behavior="Flash" id="0" inverted="1" name="Is flashing" sid="2603713534004487" type="Player" />
                        <condition id="-14" name="Compare variable" sid="7387823573818675" type="System">
                            <param id="0" name="Variable">PlayerInvincible</param>
                            <param id="1" name="Comparison">0</param>
                            <param id="2" name="Value">0</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-12" name="Subtract from" sid="2360867303945803" type="Player">
                            <param id="0" name="Instance variable">Survivors</param>
                            <param id="1" name="Value">1</param>
                        </action>
                        <action behavior="Flash" id="0" name="Flash" sid="4517560105199515" type="Player">
                            <param id="0" name="&apos;On&apos; time">0.1</param>
                            <param id="1" name="&apos;Off&apos; time">0.1</param>
                            <param id="2" name="Duration">1.0</param>
                        </action>
                    </actions>
                </event-block>
                <comment>Shooting function. The number of shoots depends on the number of survivors.</comment>
                <event-block sid="9792452049605657">
                    <conditions>
                        <condition id="0" name="On function" sid="2001374501340578" type="Function">
                            <param id="0" name="Name">&quot;Shoot&quot;</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action behavior="ScrollTo" id="0" name="Shake" sid="282503789204637" type="Camera">
                            <param id="0" name="Magnitude">3</param>
                            <param id="1" name="Duration">0.2</param>
                            <param id="2" name="Mode">1</param>
                        </action>
                    </actions>
                    <sub-events>
                        <comment>First weapon (2 survivors) - Machinegun. Fast, big, weak.</comment>
                        <event-block sid="6558699415719606">
                            <conditions>
                                <condition id="-7" name="Compare instance variable" sid="476645937026618" type="Player">
                                    <param id="0" name="Instance variable">Survivors</param>
                                    <param id="1" name="Comparison">5</param>
                                    <param id="2" name="Value">2</param>
                                </condition>
                                <condition id="-8" inverted="1" name="Is boolean instance variable set" sid="9353518217425338" type="Player">
                                    <param id="0" name="Instance variable">IsUsingMachinegun</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="0" name="Spawn another object" sid="1075148486512036" type="Turret">
                                    <param id="0" name="Object">Shot</param>
                                    <param id="1" name="Layer">&quot;Game&quot;</param>
                                    <param id="2" name="Image point">&quot;Shootpoint&quot;</param>
                                </action>
                                <action id="-2" name="Set Y" sid="9759580865231754" type="Shot">
                                    <param id="0" name="Y">Shot.Y + random(-ShotPosition, ShotPosition + 1)</param>
                                </action>
                                <action id="-18" name="Rotate clockwise" sid="6875910793465701" type="Shot">
                                    <param id="0" name="Degrees">random(-ShotAngle,ShotAngle + 1)  + (Player.TurretInverted ? 180 : 0)</param>
                                </action>
                                <action id="5" name="Set frame" sid="7185394934593382" type="Turret">
                                    <param id="0" name="Frame number">Turret.CurrentFrame</param>
                                </action>
                                <action id="-10" name="Set value" sid="1131167485152914" type="Turret">
                                    <param id="0" name="Instance variable">CurrentFrame</param>
                                    <param id="1" name="Value">(Turret.CurrentFrame + 1)%2</param>
                                </action>
                                <action id="-13" name="Set boolean" sid="7612343237218698" type="Player">
                                    <param id="0" name="Instance variable">IsUsingMachinegun</param>
                                    <param id="1" name="Value">1</param>
                                </action>
                                <action id="-16" name="Wait" sid="528797226800857" type="System">
                                    <param id="0" name="Seconds">MachinegunDelay</param>
                                </action>
                                <action id="-13" name="Set boolean" sid="7256402098409919" type="Player">
                                    <param id="0" name="Instance variable">IsUsingMachinegun</param>
                                    <param id="1" name="Value">0</param>
                                </action>
                            </actions>
                        </event-block>
                        <comment>Second weapon (3 survivors) - Shotgun. Slow, small, strong, low reach.</comment>
                        <event-block sid="3428381689269352">
                            <conditions>
                                <condition id="-7" name="Compare instance variable" sid="392617601206996" type="Player">
                                    <param id="0" name="Instance variable">Survivors</param>
                                    <param id="1" name="Comparison">5</param>
                                    <param id="2" name="Value">3</param>
                                </condition>
                                <condition id="-8" inverted="1" name="Is boolean instance variable set" sid="6771973847167706" type="Player">
                                    <param id="0" name="Instance variable">IsUsingShotgun</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="0" name="Spawn another object" sid="1021450815859162" type="Player">
                                    <param id="0" name="Object">ShotgunShoot</param>
                                    <param id="1" name="Layer">&quot;Game&quot;</param>
                                    <param id="2" name="Image point">&quot;Shootpoint&quot;</param>
                                </action>
                                <action id="-18" name="Rotate clockwise" sid="4878347323817208" type="ShotgunShoot">
                                    <param id="0" name="Degrees">-15</param>
                                </action>
                                <action id="-2" name="Set Y" sid="2284508124869983" type="ShotgunShoot">
                                    <param id="0" name="Y">ShotgunShoot.Y + random(-ShotPosition, ShotPosition + 1)</param>
                                </action>
                                <action id="0" name="Spawn another object" sid="8426214842728777" type="Player">
                                    <param id="0" name="Object">ShotgunShoot</param>
                                    <param id="1" name="Layer">&quot;Game&quot;</param>
                                    <param id="2" name="Image point">&quot;Shootpoint&quot;</param>
                                </action>
                                <action id="-2" name="Set Y" sid="8322869277269475" type="ShotgunShoot">
                                    <param id="0" name="Y">ShotgunShoot.Y + random(-ShotPosition, ShotPosition + 1)</param>
                                </action>
                                <action id="0" name="Spawn another object" sid="6301985199025866" type="Player">
                                    <param id="0" name="Object">ShotgunShoot</param>
                                    <param id="1" name="Layer">&quot;Game&quot;</param>
                                    <param id="2" name="Image point">&quot;Shootpoint&quot;</param>
                                </action>
                                <action id="-18" name="Rotate clockwise" sid="9936357049069013" type="ShotgunShoot">
                                    <param id="0" name="Degrees">15</param>
                                </action>
                                <action id="-2" name="Set Y" sid="6148663833636522" type="ShotgunShoot">
                                    <param id="0" name="Y">ShotgunShoot.Y + random(-ShotPosition, ShotPosition + 1)</param>
                                </action>
                                <action id="-13" name="Set boolean" sid="6143162848633347" type="Player">
                                    <param id="0" name="Instance variable">IsUsingShotgun</param>
                                    <param id="1" name="Value">1</param>
                                </action>
                                <action id="-16" name="Wait" sid="7388880334709897" type="System">
                                    <param id="0" name="Seconds">ShotgunDelay</param>
                                </action>
                                <action id="-13" name="Set boolean" sid="746251942776887" type="Player">
                                    <param id="0" name="Instance variable">IsUsingShotgun</param>
                                    <param id="1" name="Value">0</param>
                                </action>
                            </actions>
                        </event-block>
                        <comment>Third weapon (4 survivors) - Granade. Explodes at impact.</comment>
                        <event-block sid="738160440906902">
                            <conditions>
                                <condition id="-7" name="Compare instance variable" sid="9071643268103275" type="Player">
                                    <param id="0" name="Instance variable">Survivors</param>
                                    <param id="1" name="Comparison">5</param>
                                    <param id="2" name="Value">4</param>
                                </condition>
                                <condition id="-8" inverted="1" name="Is boolean instance variable set" sid="3682541653691204" type="Player">
                                    <param id="0" name="Instance variable">IsUsingGranade</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="0" name="Spawn another object" sid="9012937804603205" type="Player">
                                    <param id="0" name="Object">Granade</param>
                                    <param id="1" name="Layer">&quot;Game&quot;</param>
                                    <param id="2" name="Image point">&quot;Shootpoint&quot;</param>
                                </action>
                                <action id="-2" name="Set Y" sid="4392676181404063" type="Granade">
                                    <param id="0" name="Y">Granade.Y + random(-ShotPosition, ShotPosition + 1)</param>
                                </action>
                                <action id="-18" name="Rotate clockwise" sid="70648163259935" type="Granade">
                                    <param id="0" name="Degrees">random(-ShotAngle,ShotAngle + 1)  + (Player.TurretInverted ? 225 : -45) </param>
                                </action>
                                <action id="-13" name="Set boolean" sid="7642174775254337" type="Player">
                                    <param id="0" name="Instance variable">IsUsingGranade</param>
                                    <param id="1" name="Value">1</param>
                                </action>
                                <action id="-16" name="Wait" sid="4233692063754563" type="System">
                                    <param id="0" name="Seconds">ShotgunDelay</param>
                                </action>
                                <action id="-13" name="Set boolean" sid="4948365475837107" type="Player">
                                    <param id="0" name="Instance variable">IsUsingGranade</param>
                                    <param id="1" name="Value">0</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
                <comment>Does a small pause for each time it is called</comment>
                <event-block sid="9239405073329248">
                    <conditions>
                        <condition id="0" name="On function" sid="5335692551040839" type="Function">
                            <param id="0" name="Name">&quot;DramaticPause&quot;</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-14" name="Set object time scale" sid="1725170025088916" type="System">
                            <param id="0" name="Object">GameObject</param>
                            <param id="1" name="Time scale">0</param>
                        </action>
                        <action id="-16" name="Wait" sid="9967028372862463" type="System">
                            <param id="0" name="Seconds">DramaticPauseTime</param>
                        </action>
                        <action id="-15" name="Restore object time scale" sid="8912685418361027" type="System">
                            <param id="0" name="Object">GameObject</param>
                        </action>
                    </actions>
                </event-block>
            </sub-events>
        </event-group>
    </events>
</c2eventsheet>
