<?xml version="1.0" encoding="utf-8" ?>
<c2eventsheet>
    <!--All the 'name' attributes are ignored by Construct 2 - they are there for readability only.-->
    <name>GameMain</name>
    <events>
        <comment>Game Data</comment>
        <variable comment="Player Score." constant="0" name="Score" sid="7486391333038373" static="0" type="number">0</variable>
        <variable comment="Highest score the player ever had." constant="0" name="HighScore" sid="3298193103443636" static="0" type="number">0</variable>
        <comment>Parameters</comment>
        <variable comment="Delay between shots (seconds)" constant="0" name="ShotDelay" sid="5245227575535393" static="0" type="number">0.1</variable>
        <variable comment="Shoot angle max randomness." constant="0" name="ShotAngle" sid="4154039900926838" static="0" type="number">2</variable>
        <variable comment="Shoot angle max randomness." constant="0" name="CartidgeAngle" sid="4389483266959345" static="0" type="number">5</variable>
        <variable comment="Shot random Y position max value." constant="0" name="ShotPosition" sid="1149761586430817" static="0" type="number">5</variable>
        <variable comment="Camera (and character following it) speed." constant="0" name="CameraSpeed" sid="3644210586740942" static="0" type="number">50</variable>
        <variable comment="Spitter enemy max rotation." constant="0" name="SpitterMaxRotation" sid="9659925316339352" static="0" type="number">15</variable>
        <variable comment="Spitter enemy rotation speed." constant="0" name="SpitterRotationSpeed" sid="7670895352815603" static="0" type="number">15</variable>
        <variable comment="Spitter enemy shoot interval." constant="0" name="SpitterShootInterval" sid="3085334056841616" static="0" type="number">0.5</variable>
        <comment>Flags</comment>
        <variable comment="Show Debug Layer?" constant="0" name="ShowDebug" sid="4447915718697695" static="0" type="number">0</variable>
        <event-group collapsed="1" description="Player controller events." sid="7495863798319145" title="Controller">
            <sub-events>
                <comment>Shots when the shot key is pressed (considering the delay)</comment>
                <event-block sid="5839817289045311">
                    <conditions>
                        <condition id="-8" inverted="1" name="Is boolean instance variable set" sid="4893590470292907" type="Player">
                            <param id="0" name="Instance variable">IsShooting</param>
                        </condition>
                    </conditions>
                    <actions />
                    <sub-events>
                        <event-block any="1" sid="1625541269484604">
                            <conditions>
                                <condition id="3" name="Is button down" sid="8732721542079807" type="Gamepad">
                                    <param id="0" name="Gamepad">0</param>
                                    <param id="1" name="Button">0</param>
                                </condition>
                                <condition id="2" name="Key is down" sid="1063890649566922" type="Keyboard">
                                    <param id="0" name="Key">32 (Space)</param>
                                </condition>
                                <condition id="2" name="Mouse button is down" sid="1913539226346655" type="Mouse">
                                    <param id="0" name="Mouse button">0</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="0" name="Spawn another object" sid="211695786830687" type="Player">
                                    <param id="0" name="Object">Shot</param>
                                    <param id="1" name="Layer">&quot;Game&quot;</param>
                                    <param id="2" name="Image point">&quot;Shootpoint&quot;</param>
                                </action>
                                <action id="-13" name="Set boolean" sid="8740639818903828" type="Player">
                                    <param id="0" name="Instance variable">IsShooting</param>
                                    <param id="1" name="Value">1</param>
                                </action>
                                <action id="-16" name="Wait" sid="9679698685818208" type="System">
                                    <param id="0" name="Seconds">ShotDelay</param>
                                </action>
                                <action id="-13" name="Set boolean" sid="9323891098787024" type="Player">
                                    <param id="0" name="Instance variable">IsShooting</param>
                                    <param id="1" name="Value">0</param>
                                </action>
                                <action id="-18" name="Rotate clockwise" sid="8980907270500427" type="Shot">
                                    <param id="0" name="Degrees">random(-ShotAngle,ShotAngle + 1)</param>
                                </action>
                                <action id="-2" name="Set Y" sid="3075802123937552" type="Shot">
                                    <param id="0" name="Y">Shot.Y + random(-ShotPosition, ShotPosition + 1)</param>
                                </action>
                                <action behavior="ScrollTo" id="0" name="Shake" sid="9032026249328699" type="Camera">
                                    <param id="0" name="Magnitude">2</param>
                                    <param id="1" name="Duration">0.1</param>
                                    <param id="2" name="Mode">1</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
                <comment>Remaps controller ( W to Up)</comment>
                <event-block sid="7010657242711293">
                    <conditions>
                        <condition id="2" name="Key is down" sid="8260060870164343" type="Keyboard">
                            <param id="0" name="Key">87 (W)</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action behavior="8Direction" id="7" name="Simulate control" sid="535255313765059" type="Player">
                            <param id="0" name="Control">2</param>
                        </action>
                    </actions>
                </event-block>
                <comment>Remaps controller (A to Left)</comment>
                <event-block sid="2372877592491562">
                    <conditions>
                        <condition id="2" name="Key is down" sid="1756855415641945" type="Keyboard">
                            <param id="0" name="Key">65 (A)</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action behavior="8Direction" id="7" name="Simulate control" sid="2817496913014898" type="Player">
                            <param id="0" name="Control">0</param>
                        </action>
                    </actions>
                </event-block>
                <comment>Remaps controller ( S to Down)</comment>
                <event-block sid="9694203435112949">
                    <conditions>
                        <condition id="2" name="Key is down" sid="5222997502542291" type="Keyboard">
                            <param id="0" name="Key">83 (S)</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action behavior="8Direction" id="7" name="Simulate control" sid="2016963088716626" type="Player">
                            <param id="0" name="Control">3</param>
                        </action>
                    </actions>
                </event-block>
                <comment>Remaps controller ( D to Right)</comment>
                <event-block sid="1583024347804906">
                    <conditions>
                        <condition id="2" name="Key is down" sid="1812643188587365" type="Keyboard">
                            <param id="0" name="Key">68 (D)</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action behavior="8Direction" id="7" name="Simulate control" sid="9434222737208028" type="Player">
                            <param id="0" name="Control">1</param>
                        </action>
                    </actions>
                </event-block>
            </sub-events>
        </event-group>
        <event-group collapsed="1" description="Normal and special shot events, and extra shooting events, like cartidges." sid="2480136762700605" title="Shot events">
            <sub-events>
                <comment>Destroys shot outside of screen.</comment>
                <event-block sid="5269143083626051">
                    <conditions>
                        <condition id="-3" inverted="1" name="Is on-screen" sid="3701865153547944" type="Shot" />
                    </conditions>
                    <actions>
                        <action id="-9" name="Destroy" sid="6283014424403295" type="Shot" />
                    </actions>
                </event-block>
                <comment>Creates cartidge when shot is spawned.</comment>
                <event-block sid="6955227496566467">
                    <conditions>
                        <condition id="-18" name="On created" sid="9058608935500594" type="Shot" />
                    </conditions>
                    <actions>
                        <action id="0" name="Spawn another object" sid="4140254176253545" type="Shot">
                            <param id="0" name="Object">Cartidge</param>
                            <param id="1" name="Layer">&quot;Game&quot;</param>
                            <param id="2" name="Image point">0</param>
                        </action>
                        <action id="25" name="Play at object" sid="7648320999102931" type="Audio">
                            <param id="0" name="Audio file">Shoot</param>
                            <param id="1" name="Loop">0</param>
                            <param id="2" name="Volume">0</param>
                            <param id="3" name="Object">Shot</param>
                            <param id="4" name="Inner angle">360</param>
                            <param id="5" name="Outer angle">360</param>
                            <param id="6" name="Outer gain">0</param>
                            <param id="7" name="Tag (optional)">&quot;&quot;</param>
                        </action>
                    </actions>
                </event-block>
                <comment>Initializes cartidge effect.</comment>
                <event-block sid="5678837897234217">
                    <conditions>
                        <condition id="-18" name="On created" sid="7874728864907411" type="Cartidge" />
                    </conditions>
                    <actions>
                        <action behavior="Bullet" id="3" name="Set angle of motion" sid="6990774833128229" type="Cartidge">
                            <param id="0" name="Angle">Cartidge.Angle + 250 + random(-CartidgeAngle, CartidgeAngle + 1)</param>
                        </action>
                        <action id="-10" name="Set value" sid="3040574075836724" type="Cartidge">
                            <param id="0" name="Instance variable">MinY</param>
                            <param id="1" name="Value">Cartidge.Y + 10</param>
                        </action>
                    </actions>
                </event-block>
                <comment>Stops Cartidge if it &quot;hits the ground&quot;.</comment>
                <event-block sid="5298757296988459">
                    <conditions>
                        <condition id="-2" name="Compare Y" sid="6736453651273338" type="Cartidge">
                            <param id="0" name="Comparison">5</param>
                            <param id="1" name="Y co-ordinate">Cartidge.MinY</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action behavior="Bullet" id="5" name="Set enabled" sid="5426933233049227" type="Cartidge">
                            <param id="0" name="State">0</param>
                        </action>
                    </actions>
                </event-block>
            </sub-events>
        </event-group>
        <event-group collapsed="1" description="Camera control and other rendering (layers, effects) events." sid="8555777568681449" title="Camera and Rendering Events">
            <sub-events>
                <comment>Hides debug layer if flag is set to 0.</comment>
                <event-block sid="2117358144359866">
                    <conditions>
                        <condition id="-14" name="Compare variable" sid="9291172673316673" type="System">
                            <param id="0" name="Variable">ShowDebug</param>
                            <param id="1" name="Comparison">0</param>
                            <param id="2" name="Value">0</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-4" name="Set layer visible" sid="413623465911216" type="System">
                            <param id="0" name="Layer">&quot;Game - Debug&quot;</param>
                            <param id="1" name="Visibility">0</param>
                        </action>
                    </actions>
                </event-block>
                <comment>Shows debug layer if flag is not 0.</comment>
                <event-block sid="7399432453843184">
                    <conditions>
                        <condition id="-14" name="Compare variable" sid="4746845298660549" type="System">
                            <param id="0" name="Variable">ShowDebug</param>
                            <param id="1" name="Comparison">1</param>
                            <param id="2" name="Value">0</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-4" name="Set layer visible" sid="7552653586572749" type="System">
                            <param id="0" name="Layer">&quot;Game - Debug&quot;</param>
                            <param id="1" name="Visibility">1</param>
                        </action>
                    </actions>
                </event-block>
                <comment>Sets camera limit X.</comment>
                <event-block sid="8000594175719732">
                    <conditions>
                        <condition id="-18" name="On created" sid="5439655182113892" type="Camera" />
                    </conditions>
                    <actions>
                        <action id="-10" name="Set value" sid="547220834498555" type="Camera">
                            <param id="0" name="Instance variable">LimitX</param>
                            <param id="1" name="Value">LayoutWidth  - (WindowWidth / 2)</param>
                        </action>
                        <action behavior="Bullet" id="0" name="Set speed" sid="5700581804717249" type="Camera">
                            <param id="0" name="Speed">CameraSpeed</param>
                        </action>
                        <action behavior="Bullet" id="0" name="Set speed" sid="9271923156136602" type="Player">
                            <param id="0" name="Speed">CameraSpeed</param>
                        </action>
                    </actions>
                </event-block>
                <comment>Stops camera at the limit.</comment>
                <event-block sid="3373660663949809">
                    <conditions>
                        <condition id="-1" name="Compare X" sid="4167246824406811" type="Camera">
                            <param id="0" name="Comparison">5</param>
                            <param id="1" name="X co-ordinate">Camera.LimitX</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action behavior="Bullet" id="0" name="Set speed" sid="8890725826516254" type="Camera">
                            <param id="0" name="Speed">0</param>
                        </action>
                        <action behavior="Bullet" id="0" name="Set speed" sid="858427136910586" type="Player">
                            <param id="0" name="Speed">0</param>
                        </action>
                    </actions>
                </event-block>
            </sub-events>
        </event-group>
        <event-group description="Score, lives, survivors, high score..." sid="7790449752168308" title="Game Data">
            <sub-events>
                <comment>Creates High Score, if it doesn&apos;t exist.</comment>
                <event-block sid="8139995756458101">
                    <conditions>
                        <condition id="-2" name="On start of layout" sid="9624404690909285" type="System" />
                        <condition id="3" inverted="1" name="Local key exists" sid="4151058604950191" type="Storage">
                            <param id="0" name="Key">&quot;Highscore&quot;</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="0" name="Set local value" sid="5981591420468967" type="Storage">
                            <param id="0" name="Key">&quot;Highscore&quot;</param>
                            <param id="1" name="Value">0</param>
                        </action>
                        <action id="-9" name="Set value" sid="4233977099093916" type="System">
                            <param id="0" name="Variable">HighScore</param>
                            <param id="1" name="Value">0</param>
                        </action>
                    </actions>
                </event-block>
                <comment>Loads High Score, if it exists.</comment>
                <event-block sid="4967726006181347">
                    <conditions>
                        <condition id="-2" name="On start of layout" sid="13021994163587" type="System" />
                        <condition id="3" name="Local key exists" sid="5245625152880898" type="Storage">
                            <param id="0" name="Key">&quot;Highscore&quot;</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-9" name="Set value" sid="8308144397575202" type="System">
                            <param id="0" name="Variable">HighScore</param>
                            <param id="1" name="Value">Storage.LocalValue(&quot;Highscore&quot;)</param>
                        </action>
                    </actions>
                </event-block>
                <comment>Updates High Score if the score is higher.</comment>
                <event-block sid="4739294620937505">
                    <conditions>
                        <condition id="-14" name="Compare variable" sid="7170720961527875" type="System">
                            <param id="0" name="Variable">Score</param>
                            <param id="1" name="Comparison">4</param>
                            <param id="2" name="Value">HighScore</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-9" name="Set value" sid="9208402880650869" type="System">
                            <param id="0" name="Variable">HighScore</param>
                            <param id="1" name="Value">Score</param>
                        </action>
                        <action id="0" name="Set local value" sid="8124209730485911" type="Storage">
                            <param id="0" name="Key">&quot;Highscore&quot;</param>
                            <param id="1" name="Value">HighScore</param>
                        </action>
                    </actions>
                </event-block>
            </sub-events>
        </event-group>
        <event-group description="Enemy and enemy type events." sid="5887563344946064" title="Enemies">
            <sub-events>
                <comment>Bullets hit enemy, if the enemy is not flashing.</comment>
                <event-block sid="8975109783393405">
                    <conditions>
                        <condition id="0" name="On collision with another object" sid="1176632033554533" type="Enemy">
                            <param id="0" name="Object">Shot</param>
                        </condition>
                        <condition behavior="Flash" id="0" inverted="1" name="Is flashing" sid="3915880233393387" type="Enemy" />
                        <condition id="-8" inverted="1" name="Is boolean instance variable set" sid="5295277808958659" type="Enemy">
                            <param id="0" name="Instance variable">IsDead</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-12" name="Subtract from" sid="9297251914034745" type="Enemy">
                            <param id="0" name="Instance variable">HP</param>
                            <param id="1" name="Value">1</param>
                        </action>
                        <action behavior="Flash" id="0" name="Flash" sid="4025536948330121" type="Enemy">
                            <param id="0" name="&apos;On&apos; time">0.1</param>
                            <param id="1" name="&apos;Off&apos; time">0.1</param>
                            <param id="2" name="Duration">0.5</param>
                        </action>
                        <action id="-9" name="Destroy" sid="7270699215070805" type="Shot" />
                        <action id="25" name="Play at object" sid="4637034071332631" type="Audio">
                            <param id="0" name="Audio file">Hit</param>
                            <param id="1" name="Loop">0</param>
                            <param id="2" name="Volume">0</param>
                            <param id="3" name="Object">Enemy</param>
                            <param id="4" name="Inner angle">360</param>
                            <param id="5" name="Outer angle">360</param>
                            <param id="6" name="Outer gain">0</param>
                            <param id="7" name="Tag (optional)">&quot;&quot;</param>
                        </action>
                    </actions>
                </event-block>
                <comment>If enemy has no HP, it dies.</comment>
                <event-block sid="5572807431718024">
                    <conditions>
                        <condition id="-7" name="Compare instance variable" sid="2484694745018236" type="Enemy">
                            <param id="0" name="Instance variable">HP</param>
                            <param id="1" name="Comparison">3</param>
                            <param id="2" name="Value">0</param>
                        </condition>
                        <condition id="-8" inverted="1" name="Is boolean instance variable set" sid="7388070203930565" type="Enemy">
                            <param id="0" name="Instance variable">IsDead</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-10" name="Add to" sid="905009486201112" type="System">
                            <param id="0" name="Variable">Score</param>
                            <param id="1" name="Value">Enemy.Points</param>
                        </action>
                        <action id="0" name="Spawn another object" sid="2270971890174927" type="Enemy">
                            <param id="0" name="Object">EnemyPoints</param>
                            <param id="1" name="Layer">&quot;Game&quot;</param>
                            <param id="2" name="Image point">0</param>
                        </action>
                        <action id="0" name="Set text" sid="3203978515839476" type="EnemyPoints">
                            <param id="0" name="Text">Enemy.Points</param>
                        </action>
                        <action id="-13" name="Set boolean" sid="1980098892444935" type="Enemy">
                            <param id="0" name="Instance variable">IsDead</param>
                            <param id="1" name="Value">1</param>
                        </action>
                        <action id="4" name="Set animation" sid="8645601271912023" type="Enemy">
                            <param id="0" name="Animation">&quot;Dead&quot;</param>
                            <param id="1" name="From">1</param>
                        </action>
                    </actions>
                </event-block>
                <comment>Rotates Spitter</comment>
                <event-block sid="3948886055302022">
                    <conditions>
                        <condition id="-3" name="Is on-screen" sid="3733258221896568" type="Spitter" />
                    </conditions>
                    <actions>
                        <action id="-11" name="Add to" sid="4378959737120401" type="Spitter">
                            <param id="0" name="Instance variable">Rotation</param>
                            <param id="1" name="Value">Spitter.RotationDifference * SpitterRotationSpeed * dt</param>
                        </action>
                        <action id="-8" name="Set angle" sid="1684762032277495" type="Spitter">
                            <param id="0" name="Angle">Spitter.Rotation</param>
                        </action>
                    </actions>
                </event-block>
                <comment>Changes Spitter rotation direction.</comment>
                <event-block any="1" sid="9710539897879522">
                    <conditions>
                        <condition id="-7" name="Compare instance variable" sid="9088095169190081" type="Spitter">
                            <param id="0" name="Instance variable">Rotation</param>
                            <param id="1" name="Comparison">3</param>
                            <param id="2" name="Value">-SpitterMaxRotation</param>
                        </condition>
                        <condition id="-7" name="Compare instance variable" sid="7346694833733088" type="Spitter">
                            <param id="0" name="Instance variable">Rotation</param>
                            <param id="1" name="Comparison">5</param>
                            <param id="2" name="Value">SpitterMaxRotation</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-10" name="Set value" sid="7762857173450791" type="Spitter">
                            <param id="0" name="Instance variable">RotationDifference</param>
                            <param id="1" name="Value">Spitter.RotationDifference * -1</param>
                        </action>
                    </actions>
                </event-block>
                <comment>Shoots each X seconds.</comment>
                <event-block sid="9131946075327807">
                    <conditions>
                        <condition id="-3" name="Is on-screen" sid="4183175403160208" type="Spitter" />
                        <condition id="-6" name="Every X seconds" sid="9956082927470559" type="System">
                            <param id="0" name="Interval (seconds)">SpitterShootInterval</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="0" name="Spawn another object" sid="3109179800303355" type="Spitter">
                            <param id="0" name="Object">EnemyShoot</param>
                            <param id="1" name="Layer">&quot;Game&quot;</param>
                            <param id="2" name="Image point">&quot;ShootPoint&quot;</param>
                        </action>
                        <action id="-18" name="Rotate clockwise" sid="4009726173115719" type="EnemyShoot">
                            <param id="0" name="Degrees">180</param>
                        </action>
                    </actions>
                </event-block>
            </sub-events>
        </event-group>
        <event-group collapsed="1" description="HUD events and updates." sid="7836260230105831" title="HUD">
            <sub-events>
                <comment>Updates score and high score on HUD.</comment>
                <event-block sid="8430060814907466">
                    <conditions>
                        <condition id="-1" name="Every tick" sid="9172965612731808" type="System" />
                    </conditions>
                    <actions>
                        <action id="0" name="Set text" sid="470229447322066" type="HUDScores">
                            <param id="0" name="Text">&quot;Score: &quot; &amp; Score &amp; &quot;  Hi-Score: &quot; &amp; HighScore</param>
                        </action>
                    </actions>
                </event-block>
            </sub-events>
        </event-group>
    </events>
</c2eventsheet>
